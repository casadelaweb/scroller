export default class Scroller{constructor(t){function e(t,e){return void 0===t?e:t}void 0===t&&(t={}),this.btnSelector=e(t.btnSelector,".scroll-to"),this.btnAttr=e(t.btnAttr,"data-scroll"),this.btnPreventDefault=e(t.btnPreventDefault,!0),this.btnUpSelector=e(t.btnUpSelector,".button-up"),this.linkSelector=e(t.linkSelector,"a"),this.offsetTop=e(t.offsetTop,0),this.navAutoOffset=e(t.navAutoOffset,!1),this.navSelector=e(t.navSelector,"nav"),this.log=e(t.log,!1),this.logLang=e(t.logLang,"en"),this.init()}doLog(t,e){!0!==this.log&&"log"!==this.log||("ru"===this.logLang?console.log(t):console.log(e))}doScroll(t,e,o,i,n){let s=e.getAttribute(o),l=document.querySelector("#"+s);if((n||0===o)&&(l=document.querySelector(n),t.preventDefault()),l){let t=l.getBoundingClientRect().top-i;window.scrollBy({top:t,behavior:"smooth"})}else this.doLog(`Элемента с id ${s} не существует на этой странице.`,`Element with id ${s} does NOT exist on this page.`)}returnNavHeight(t){let e=document.querySelector(t);if(e){return e.offsetHeight}return this.doLog(`Элемента с селектором "${t}" нет на этой странице. Отступ для навигации установлен по-умолчанию: 0px.`,`Element with selector: "${t}" in NOT on this page. Navigation offset set to default: 0px;`),0}initButtonsUp(t){t.target.matches(this.btnUpSelector)&&(window.scrollTo({top:0,behavior:"smooth"}),this.doLog("Сработала кнопка НАВЕРХ","Button Up has been fired"))}initButtons(t,e){if(t.target.matches(this.btnSelector)){1==this.btnPreventDefault&&(t.preventDefault(),this.doLog("Поведение кнопок по-умолчанию отключено.","Button's default behavior is prevented."));const o=this.btnAttr;this.doScroll(t,t.target,o,e,0)}}initLinks(t,e){if(t.target.matches(this.linkSelector)){let o=t.target.hash;if(o&&(document.querySelector(o)&&(this.doLog(`Это ссылка и ее хэш это ${o} и элемент с таким id существует на этой странице`,`It's a link and it's hash is ${o} and element with such id exist on this page`),this.doScroll(t,t.target,0,e,o)),!document.querySelector(o))){t.preventDefault(),localStorage.setItem("Scroller: Task",o);let e=t.target.href,i=e.replace(o,"");document.location.href=i,this.doLog(`${e} ,${o}, ${i}`)}}}initLinksOnPageLoad(t){const e=localStorage.getItem("Scroller: Task");if(e){this.doLog(`На этой странице есть задание на прокрутку, ${e}`,`There is scroller task on this page, ${e}`);let o=document.querySelector(e);if(o){let e=o.getBoundingClientRect().top-t;setTimeout((function(){window.scrollBy({top:e,behavior:"smooth"})}),200)}this.doLog(`Задание на прокрутку выполнено, ${e}`,`Scroller task has been done, ${e}`)}localStorage.removeItem("Scroller: Task")}init(){let t=parseInt(this.offsetTop);Number.isNaN(t)&&(t=0),this.doLog(`Заданный offsetTop = ${t}px`,`Static offsetTop = ${t}px`),!0!==this.navAutoOffset&&"true"!==this.navAutoOffset||(t+=this.returnNavHeight(this.navSelector),this.doLog(`navAutoOffset - включен, общий offsetTop (с учетом навигации) = ${t}px`,`navAutoOffset - enabled, total offsetTop (including nav height) = ${t}px`)),this.initLinksOnPageLoad(t),document.body.addEventListener("click",(e=>{this.initButtonsUp(e),this.initButtons(e,t),this.initLinks(e,t)}))}}