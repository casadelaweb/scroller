"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}var Scroller=function(){function t(e){function o(t,e){return void 0===t?e:t}_classCallCheck(this,t),void 0===e&&(e={}),this.btnSelector=o(e.btnSelector,".scroll-to"),this.btnAttr=o(e.btnAttr,"data-scroll"),this.btnPreventDefault=o(e.btnPreventDefault,!0),this.btnUpSelector=o(e.btnUpSelector,".button-up"),this.linkSelector=o(e.linkSelector,"a"),this.offsetTop=o(e.offsetTop,0),this.navAutoOffset=o(e.navAutoOffset,!1),this.navSelector=o(e.navSelector,"nav"),this.log=o(e.log,!1),this.logLang=o(e.logLang,"en"),this.init()}return _createClass(t,[{key:"doLog",value:function(t,e){!0!==this.log&&"log"!==this.log||("ru"===this.logLang?console.log(t):console.log(e))}},{key:"doScroll",value:function(t,e,o,n,i){var a=e.getAttribute(o),r=document.querySelector("#"+a);if((i||0===o)&&(r=document.querySelector(i),t.preventDefault()),r){var s=r.getBoundingClientRect().top-n;window.scrollBy({top:s,behavior:"smooth"})}else this.doLog("Элемента с id ".concat(a," не существует на этой странице."),"Element with id ".concat(a," does NOT exist on this page."))}},{key:"returnNavHeight",value:function(t){var e=document.querySelector(t);return e?e.offsetHeight:(this.doLog('Элемента с селектором "'.concat(t,'" нет на этой странице. Отступ для навигации установлен по-умолчанию: 0px.'),'Element with selector: "'.concat(t,'" in NOT on this page. Navigation offset set to default: 0px;')),0)}},{key:"initButtonsUp",value:function(t){t.target.matches(this.btnUpSelector)&&(window.scrollTo({top:0,behavior:"smooth"}),this.doLog("Сработала кнопка НАВЕРХ","Button Up has been fired"))}},{key:"initButtons",value:function(t,e){if(t.target.matches(this.btnSelector)){1==this.btnPreventDefault&&(t.preventDefault(),this.doLog("Поведение кнопок по-умолчанию отключено.","Button's default behavior is prevented."));var o=this.btnAttr;this.doScroll(t,t.target,o,e,0)}}},{key:"initLinks",value:function(t,e){if(t.target.matches(this.linkSelector)){var o=t.target.hash;if(o&&(document.querySelector(o)&&(this.doLog("Это ссылка и ее хэш это ".concat(o," и элемент с таким id существует на этой странице"),"It's a link and it's hash is ".concat(o," and element with such id exist on this page")),this.doScroll(t,t.target,0,e,o)),!document.querySelector(o))){t.preventDefault(),localStorage.setItem("Scroller: Task",o);var n=t.target.href,i=n.replace(o,"");this.doLog("".concat(n," ,").concat(o,", ").concat(i))}}}},{key:"initLinksOnPageLoad",value:function(){var t=this;document.addEventListener("DOMContentLoaded",(function(e){var o=localStorage.getItem("Scroller: Task");if(o){t.doLog("На этой странице есть задание на прокрутку, ".concat(o),"There is scroller task on this page, ".concat(o));var n=document.querySelector(o);if(n){var i=n.getBoundingClientRect().top;setTimeout((function(){window.scrollBy({top:i,behavior:"smooth"})}),100)}t.doLog("Задание на прокрутку выполнено, ".concat(o),"Scroller task has been done, ".concat(o))}localStorage.removeItem("Scroller: Task")}))}},{key:"init",value:function(){var t=this,e=parseInt(this.offsetTop);Number.isNaN(e)&&(e=0),this.doLog("Заданный offsetTop = ".concat(e,"px"),"Static offsetTop = ".concat(e,"px")),!0!==this.navAutoOffset&&"true"!==this.navAutoOffset||(e+=this.returnNavHeight(this.navSelector),this.doLog("navAutoOffset - включен, общий offsetTop (с учетом навигации) = ".concat(e,"px"),"navAutoOffset - enabled, total offsetTop (including nav height) = ".concat(e,"px"))),this.initLinksOnPageLoad(),document.body.addEventListener("click",(function(o){t.initButtonsUp(o),t.initButtons(o,e),t.initLinks(o,e)}))}}]),t}();